<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="ggDoubleHeat">
<title>Introduction to ggDoubleHeat • ggDoubleHeat</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to ggDoubleHeat">
<meta property="og:description" content="ggDoubleHeat">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-default navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">ggDoubleHeat</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-vignettes">Vignettes</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-vignettes">
    <a class="dropdown-item" href="../articles/introduction.html">Introduction to ggDoubleHeat</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">News</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/PursuitOfDataScience/ggDoubleHeat">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="introduction_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <main id="main"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Introduction to ggDoubleHeat</h1>
            
      
      
      <div class="d-none name"><code>introduction.Rmd</code></div>
    </div>

    
    
<p>The <em>ggDoubleHeat</em> package is a <em>ggplot2</em> extension. <em>ggDoubleHeat</em> plots are reformed heat maps that compare two sets of values with shared data attributes. They can be quite useful for visualizing data from two different sources with at least four dimensions in total, and can be generated in conjunction with using <em>ggplot2</em> at ease.</p>
<div class="section level2">
<h2 id="when-to-use-the-package">When to use the package?<a class="anchor" aria-label="anchor" href="#when-to-use-the-package"></a>
</h2>
<p>To begin with, it is necessary to introduce one of the built-in data sets in the package <code>pitts_tg</code>. This data set includes the weekly aggregated incidence rate for Google and Twitter COVID-related searches and tweets (with the keywords falling into the 9 categories) respectively in the Pittsburgh Metropolitan Statistical Area (MSA) in a 30-week period. For the complete data introduction, just type <code><a href="../reference/pitts_tg.html">?pitts_tg</a></code> at the console.</p>
<p>Here is the structure of the data set:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://pursuitofdatascience.github.io/ggDoubleHeat/">ggDoubleHeat</a></span><span class="op">)</span>
<span class="va">pitts_tg</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 270 × 6</span></span>
<span class="co">#&gt;    msa         week week_start category          Twitter  Google</span>
<span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> Pittsburgh     1 2020-06-01 Covid              0.965  0.681  </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> Pittsburgh     1 2020-06-01 General Virus      0.538  0.098<span style="text-decoration: underline;">2</span> </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> Pittsburgh     1 2020-06-01 Masks              0.466  0.117  </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> Pittsburgh     1 2020-06-01 Sanitizing         0.056<span style="text-decoration: underline;">1</span> 0.127  </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> Pittsburgh     1 2020-06-01 Social Distancing  0.294  0.038<span style="text-decoration: underline;">6</span> </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> Pittsburgh     1 2020-06-01 Symptoms           0.045<span style="text-decoration: underline;">7</span> 0.077<span style="text-decoration: underline;">0</span> </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> Pittsburgh     1 2020-06-01 Tests              0.013<span style="text-decoration: underline;">0</span> 0.004<span style="text-decoration: underline;">15</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> Pittsburgh     1 2020-06-01 Treatment          0.045<span style="text-decoration: underline;">9</span> 0.037<span style="text-decoration: underline;">6</span> </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> Pittsburgh     1 2020-06-01 Working            0.295  0.160  </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">10</span> Pittsburgh     2 2020-06-08 Covid              1.01   0.707  </span>
<span class="co">#&gt; <span style="color: #949494;"># … with 260 more rows</span></span></code></pre></div>
<p><code>week</code>, <code>category</code>, <code>Twitter</code>, and <code>Google</code> are the four columns we need.</p>
<p>By using <em>ggplot2</em> only, one of the heatmap-like ways to visualize <code>pitts_tg</code> is:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span><span class="op">)</span>
<span class="va">pitts_tg</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html" class="external-link">pivot_longer</a></span><span class="op">(</span>cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">Twitter</span><span class="op">:</span><span class="va">Google</span><span class="op">)</span>, names_to <span class="op">=</span> <span class="st">"source"</span>, values_to <span class="op">=</span> <span class="st">"incidence_rate"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">week</span>, <span class="va">category</span>, fill <span class="op">=</span> <span class="va">incidence_rate</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_tile.html" class="external-link">geom_tile</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">source</span><span class="op">)</span></code></pre></div>
<p><img src="introduction_files/figure-html/unnamed-chunk-2-1.png" width="768"></p>
<p>When looking at the faceted plot, we immediately recognize that it is not easy to compare Google and Twitter incidence rate for a specific week and a specific category, as they are far apart from each other. To better visualize the data, here we have the <em>ggDoubleHeat</em> package, combining the above faceted plots into an integral one, while making it much easier to compare the difference among Google/Twitter incidence rates.</p>
</div>
<div class="section level2">
<h2 id="how-to-use-the-package">How to use the package?<a class="anchor" aria-label="anchor" href="#how-to-use-the-package"></a>
</h2>
<p>All geom functions in <em>ggDoubleHeat</em> are adopted as <code>geom_heat_*()</code> for consistent naming conventions. Unlike a typical <code>geom_*()</code> function in ggplot2, all data variables do not need <code><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes()</a></code> when using <code>geom_heat_*()</code>, allowing plots to have different color renderings internally.</p>
<p>Now let’s meet the <code>geom_heat_*()</code> family one by one:</p>
<div class="section level4">
<h4 id="i--geom_heat_grid">
<strong>I. geom_heat_grid()</strong><a class="anchor" aria-label="anchor" href="#i--geom_heat_grid"></a>
</h4>
<p>Two required arguments are needed when using <code><a href="../reference/geom_heat_grid.html">geom_heat_grid()</a></code>, <code>outside</code> and <code>inside</code>:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">pitts_tg</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">week</span>, <span class="va">category</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_heat_grid.html">geom_heat_grid</a></span><span class="op">(</span>outside <span class="op">=</span> <span class="va">Google</span>, inside <span class="op">=</span> <span class="va">Twitter</span><span class="op">)</span></code></pre></div>
<p><img src="introduction_files/figure-html/unnamed-chunk-3-1.png" width="768"></p>
<p>The outside portion of each heatgrid unit represents the Google incidence rate, and the inside the Twitter one. When looking the plot, it seems like the COVID category is an outlier among every week, comprising the larger values for both Google and Twitter when compared to the values of the other categories. Consequently, the non-COVID categories have plain colors, or in other words, the colors get washed out. One of the solutions is <code>trans = "sqrt"</code>, a good option for adjusting the scale for <code>fill</code>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">pitts_tg</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">week</span>, <span class="va">category</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_heat_grid.html">geom_heat_grid</a></span><span class="op">(</span>outside <span class="op">=</span> <span class="va">Google</span>, inside <span class="op">=</span> <span class="va">Twitter</span>, trans <span class="op">=</span> <span class="st">"sqrt"</span><span class="op">)</span></code></pre></div>
<p><img src="introduction_files/figure-html/unnamed-chunk-4-1.png" width="768"></p>
<p><code>trans = "sqrt"</code> here is equivalent to <code>scale_x/y_sqrt()</code> but for <code>fill</code>. The reason why <code>log10</code> is not used on <code>trans</code> is that the most of the values from the data are less than 1, making <code>fill</code> to be negative.</p>
<p>The argument <code>r</code> is to tune the size of inside portion with respect to each grid. Users can make the fine adjustment based on their preference.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">pitts_tg</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">week</span>, <span class="va">category</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_heat_grid.html">geom_heat_grid</a></span><span class="op">(</span>outside <span class="op">=</span> <span class="va">Google</span>, inside <span class="op">=</span> <span class="va">Twitter</span>, r <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></code></pre></div>
<p><img src="introduction_files/figure-html/unnamed-chunk-5-1.png" width="768"></p>
<p>The larger <code>r</code> is, the smaller the inside turns out to be. N.B. <code>r</code> has to be greater than 2.</p>
<p><em>ggplot2</em> by default gives some padding (margins) around the plot, yet <em>ggDoubleHeat</em> provides a nifty function <code><a href="../reference/remove_padding.html">remove_padding()</a></code> to help remove it and thus make the plot take up the entire plot space with the full appearance.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">pitts_tg</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">week</span>, <span class="va">category</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_heat_grid.html">geom_heat_grid</a></span><span class="op">(</span>outside <span class="op">=</span> <span class="va">Google</span>, inside <span class="op">=</span> <span class="va">Twitter</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/remove_padding.html">remove_padding</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="introduction_files/figure-html/unnamed-chunk-6-1.png" width="768"></p>
<p>Regarding the colors for the inside and outside, users can pass a color vector to arguments <code>outside_colors</code> and <code>inside_colors</code> respectively:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">pitts_tg</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">week</span>, <span class="va">category</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_heat_grid.html">geom_heat_grid</a></span><span class="op">(</span>outside <span class="op">=</span> <span class="va">Google</span>, outside_colors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"lightblue"</span>, <span class="st">"springgreen2"</span><span class="op">)</span>,
                 inside <span class="op">=</span> <span class="va">Twitter</span>, inside_colors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"lightpink"</span>, <span class="st">"orange"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="introduction_files/figure-html/unnamed-chunk-7-1.png" width="768"></p>
</div>
<div class="section level4">
<h4 id="ii--geom_heat_circle">
<strong>II. geom_heat_circle()</strong><a class="anchor" aria-label="anchor" href="#ii--geom_heat_circle"></a>
</h4>
<p>By replacing <code><a href="../reference/geom_heat_grid.html">geom_heat_grid()</a></code> with <code><a href="../reference/geom_heat_circle.html">geom_heat_circle()</a></code>,</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">pitts_tg</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">week</span>, <span class="va">category</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_heat_circle.html">geom_heat_circle</a></span><span class="op">(</span>outside <span class="op">=</span> <span class="va">Google</span>, inside <span class="op">=</span> <span class="va">Twitter</span><span class="op">)</span></code></pre></div>
<p><img src="introduction_files/figure-html/unnamed-chunk-8-1.png" width="768"></p>
<p>We can zoom into the circle plot by looking at Week 10 to 20:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">pitts_tg</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">week</span> <span class="op">&gt;=</span> <span class="fl">10</span>, <span class="va">week</span> <span class="op">&lt;=</span> <span class="fl">20</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">week</span>, <span class="va">category</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_heat_circle.html">geom_heat_circle</a></span><span class="op">(</span>outside <span class="op">=</span> <span class="va">Google</span>, inside <span class="op">=</span> <span class="va">Twitter</span>, trans <span class="op">=</span> <span class="st">"sqrt"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_x_continuous</a></span><span class="op">(</span>breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">10</span>,<span class="fl">20</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="introduction_files/figure-html/unnamed-chunk-9-1.png" width="768"></p>
</div>
<div class="section level4">
<h4 id="iii--geom_heat_tri">
<strong>III. geom_heat_tri()</strong><a class="anchor" aria-label="anchor" href="#iii--geom_heat_tri"></a>
</h4>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">pitts_tg</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">week</span>, <span class="va">category</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_heat_tri.html">geom_heat_tri</a></span><span class="op">(</span>lower <span class="op">=</span> <span class="va">Google</span>, upper <span class="op">=</span> <span class="va">Twitter</span><span class="op">)</span></code></pre></div>
<p><img src="introduction_files/figure-html/unnamed-chunk-10-1.png" width="768"></p>
<p>Unlike <code>geom_heat_grid/circle()</code> sharing the exact same arguments, <code><a href="../reference/geom_heat_tri.html">geom_heat_tri()</a></code> has slightly different arguments than the previous two <code>geom_heat_*()</code> functions. Instead of using <code>outside</code> and <code>inside</code>, it has <code>lower</code> and <code>upper</code>. Also, <code>r</code> does not exist in this function. Users can figure out why this is the case.</p>
<p>Now we can tidy up the heatgrid shown above:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">pitts_tg</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">week</span>, <span class="va">category</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_heat_grid.html">geom_heat_grid</a></span><span class="op">(</span>outside <span class="op">=</span> <span class="va">Google</span>, inside <span class="op">=</span> <span class="va">Twitter</span>, trans <span class="op">=</span> <span class="st">"sqrt"</span>,
                 r <span class="op">=</span> <span class="fl">3.6</span>,
                 labels <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/label_percent.html" class="external-link">percent_format</a></span><span class="op">(</span>scale <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/theme_heat.html">theme_heat</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/remove_padding.html">remove_padding</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Pittsburgh Google &amp; Twitter Incidence Rate"</span><span class="op">)</span></code></pre></div>
<p><img src="introduction_files/figure-html/unnamed-chunk-11-1.png" width="768"></p>
<p><code><a href="../reference/theme_heat.html">theme_heat()</a></code> is a theme provided by the package.</p>
<p>So far, we have only visualized the incidence rates in Pittsburgh. Since we used faceting when visualizing <code>pitts_tg</code> at the begining, it is time to make a heatgrid with multiple states involved.</p>
<p><code>states_tg</code> is another data set in the package, providing Google and Twitter weekly incidence rate for 4 states in the U.S., and it has the exact same data structure as <code>pitts_tg</code>. For more information, just type <code><a href="../reference/states_tg.html">?states_tg</a></code> at the console.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">states_tg</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">week</span>, <span class="va">category</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_heat_grid.html">geom_heat_grid</a></span><span class="op">(</span>outside <span class="op">=</span> <span class="va">Google</span>, inside <span class="op">=</span> <span class="va">Twitter</span>, r <span class="op">=</span> <span class="fl">4</span>, trans <span class="op">=</span> <span class="st">"sqrt"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">state</span><span class="op">)</span> </code></pre></div>
<p><img src="introduction_files/figure-html/unnamed-chunk-12-1.png" width="768"></p>
<p>We have been discussing using the package to compare two data sources (i.e. Twitter &amp; Google), but the other way to think about using <em>ggDoubleHeat</em> is when comparing mean and median of a single source. Let’s use the following <code>iris</code> example to demonstrate it:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">iris_summarized</span> <span class="op">&lt;-</span> <span class="va">iris</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html" class="external-link">pivot_longer</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span>, names_to <span class="op">=</span> <span class="st">"metric"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">Species</span>, <span class="va">metric</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span>mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">value</span><span class="op">)</span>,
            median <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html" class="external-link">median</a></span><span class="op">(</span><span class="va">value</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span>

<span class="va">iris_summarized</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 12 × 4</span></span>
<span class="co">#&gt;    Species    metric        mean median</span>
<span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> setosa     Petal.Length 1.46    1.5 </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> setosa     Petal.Width  0.246   0.2 </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> setosa     Sepal.Length 5.01    5   </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> setosa     Sepal.Width  3.43    3.4 </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> versicolor Petal.Length 4.26    4.35</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> versicolor Petal.Width  1.33    1.3 </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> versicolor Sepal.Length 5.94    5.9 </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> versicolor Sepal.Width  2.77    2.8 </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> virginica  Petal.Length 5.55    5.55</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">10</span> virginica  Petal.Width  2.03    2   </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">11</span> virginica  Sepal.Length 6.59    6.5 </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">12</span> virginica  Sepal.Width  2.97    3</span></code></pre></div>
<p>A common way to visualize <code>iris_summarized</code> is as follows:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">iris_summarized</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html" class="external-link">pivot_longer</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">mean</span><span class="op">:</span><span class="va">median</span><span class="op">)</span>, names_to <span class="op">=</span> <span class="st">"summary_metric"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">value</span>, <span class="va">Species</span>, fill <span class="op">=</span> <span class="va">summary_metric</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_col</a></span><span class="op">(</span>position <span class="op">=</span> <span class="st">"dodge"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">metric</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></code></pre></div>
<p><img src="introduction_files/figure-html/unnamed-chunk-14-1.png" width="768"></p>
<p>Now we can use heatgrid to visualize the summarized data:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">iris_summarized</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">Species</span>, <span class="va">metric</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_heat_grid.html">geom_heat_grid</a></span><span class="op">(</span>outside <span class="op">=</span> <span class="va">mean</span>, inside <span class="op">=</span> <span class="va">median</span><span class="op">)</span></code></pre></div>
<p><img src="introduction_files/figure-html/unnamed-chunk-15-1.png" width="768"></p>
<p>Here we see the mean and median across all sections are rather close within each grid. Otherwise, some stark difference would be caught by our eyes, thus giving us a rough picture of how data is distributed.</p>
<p>Usually, mean and median are not visualized on the same plot, but visualizing them on the same plot can give viewers important information on whether data has outliers on one side or the other. Using heatgrid can make such visualization easy and effective.</p>
</div>
</div>
<div class="section level2">
<h2 id="why-to-use-the-package">Why to use the package?<a class="anchor" aria-label="anchor" href="#why-to-use-the-package"></a>
</h2>
<p>As all the code shown above, it is rather easy to use <code>geom_heat_*()</code> as long as users know how to use <em>ggplot2</em>, and the <em>ggDoubleHeat</em> plots offer some handy visual comparison for data on par with each other. All these plots are at least one dimension higher than a conventional heat map. Making them is effortless, as the package inherits ggplot2 features.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Crafted by Youzhi Yu, Trent Buskirk.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
